


<!DOCTYPE html>
<!-- source: https://github.com/pages-themes/minimal/blob/master/_layouts/default.html -->
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Getting Started | ODrive</title>
<meta name="generator" content="Jekyll v3.8.7" />
<meta property="og:title" content="Getting Started" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="High performance motor control" />
<meta property="og:description" content="High performance motor control" />
<meta property="og:site_name" content="ODrive" />
<script type="application/ld+json">
{"headline":"Getting Started","description":"High performance motor control","url":"/","@type":"WebSite","name":"ODrive","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=b4e5469dcf6e2f2139cd0ae9f20e8bf6bbb256c2">
    <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div style="position: absolute;top: 0;left: 0;width: 100%;background-color: #5bc0de;height: 20px;text-align: center;font-weight: 600">The docs reflect firmware version 0.5.1. There are many breaking <a href="/migration">changes</a>. Please find docs for v0.4.12 <a href="https://github.com/madcowswe/ODrive/blob/fw-v0.4.12/docs/getting-started.md">here</a>.</div>
    <div class="wrapper">
      <header>
        <div>
          <h1><a href="/">ODrive Documentation</a></h1>

          

          <p>High performance motor control</p>
        </div>
        <div style="overflow-y: auto;">
          <ul id="navbar">
            
            <li class="navgroup">
              <p class="navheader">General</p>
              <ul>
                
                
                
                
                
                <li><a class="navitem currentitem" href="/" alt="Getting Started">Getting Started</a></li>
                
                
                
                
                <li><a class="navitem" href="/odrivetool" alt="ODrive Tool">ODrive Tool</a></li>
                
                
                
                
                <li><a class="navitem" href="/commands" alt="Parameters & Commands">Parameters & Commands</a></li>
                
                
                
                
                <li><a class="navitem" href="/encoders" alt="Encoders">Encoders</a></li>
                
                
                
                
                <li><a class="navitem" href="/control" alt="Control & Tuning">Control & Tuning</a></li>
                
                
                
                
                <li><a class="navitem" href="/troubleshooting" alt="Troubleshooting">Troubleshooting</a></li>
                
                
                
                
                <li><a class="navitem" href="/specifications" alt="Specifications">Specifications</a></li>
                
                
              </ul>
            </li>
            
            <li class="navgroup">
              <p class="navheader">Tutorials</p>
              <ul>
                
                
                
                
                
                <li><a class="navitem" href="/hoverboard" alt="Hoverboard Guide">Hoverboard Guide</a></li>
                
                
                
                
                <li><a class="navitem" href="/migration" alt="Migration Guide">Migration Guide</a></li>
                
                
              </ul>
            </li>
            
            <li class="navgroup">
              <p class="navheader">Interfaces</p>
              <ul>
                
                
                
                
                
                <li><a class="navitem" href="/pinout" alt="Pinout">Pinout</a></li>
                
                
                
                
                <li><a class="navitem" href="/native-protocol" alt="Native Protocol">Native Protocol</a></li>
                
                
                
                
                <li><a class="navitem" href="/can-protocol" alt="CAN Protocol">CAN Protocol</a></li>
                
                
                
                
                <li><a class="navitem" href="/ascii-protocol" alt="ASCII Protocol">ASCII Protocol</a></li>
                
                
                
                
                <li><a class="navitem" href="/step-direction" alt="Step & Direction">Step & Direction</a></li>
                
                
                
                
                <li><a class="navitem" href="/rc-pwm" alt="RC PWM">RC PWM</a></li>
                
                
                
                
                <li><a class="navitem" href="/endstops" alt="Homing & Endstops">Homing & Endstops</a></li>
                
                
                
                
                <li><a class="navitem" href="/thermistors" alt="Thermistors">Thermistors</a></li>
                
                
              </ul>
            </li>
            
            <li class="navgroup">
              <p class="navheader">API Reference</p>
              <ul>
                
                


<li>

  <input id="chk-ODrive" type="checkbox"  hidden />
  <p class="navitem">
    
    <label style="margin-left: 0px;" for="chk-ODrive" class="chevron"></label>
    <a href="/api/odrive">ODrive</a>
  </p>
  <ul class="expandable-list">

    <li>
    
      <input id="chk-ODrive.Can" type="checkbox"  hidden />
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <label style="margin-left: 0px;" for="chk-ODrive.Can" class="chevron"></label>
        <a href="/api/odrive.can">Can</a>
      </p>
      <ul class="expandable-list">

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.can.config">Config</a>
          </p>
        </li>

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.can.error">Error</a>
          </p>
        </li>
        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.can.protocol">Protocol</a>
          </p>
        </li>
      </ul>
    </li>
    <li>
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
        <a href="/api/odrive.endpoint">Endpoint</a>
      </p>
    </li>
    <li>
    
      <input id="chk-ODrive.Axis" type="checkbox"  hidden />
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <label style="margin-left: 0px;" for="chk-ODrive.Axis" class="chevron"></label>
        <a href="/api/odrive.axis">Axis</a>
      </p>
      <ul class="expandable-list">

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.axis.lockinconfig">LockinConfig</a>
          </p>
        </li>
        <li>
        
          <input id="chk-ODrive.Axis.Config" type="checkbox"  hidden />
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <label style="margin-left: 0px;" for="chk-ODrive.Axis.Config" class="chevron"></label>
            <a href="/api/odrive.axis.config">Config</a>
          </p>
          <ul class="expandable-list">

            <li>
              <p class="navitem">
                <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
                <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
                <a href="/api/odrive.axis.config.calibrationlockin">CalibrationLockin</a>
              </p>
            </li>

          </ul>
        </li>

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.axis.error">Error</a>
          </p>
        </li>
        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.axis.lockinstate">LockinState</a>
          </p>
        </li>
        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.axis.axisstate">AxisState</a>
          </p>
        </li>
      </ul>
    </li>
    <li>
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
        <a href="/api/odrive.thermistorcurrentlimiter">ThermistorCurrentLimiter</a>
      </p>
    </li>
    <li>
    
      <input id="chk-ODrive.OnboardThermistorCurrentLimiter" type="checkbox"  hidden />
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <label style="margin-left: 0px;" for="chk-ODrive.OnboardThermistorCurrentLimiter" class="chevron"></label>
        <a href="/api/odrive.onboardthermistorcurrentlimiter">OnboardThermistorCurrentLimiter</a>
      </p>
      <ul class="expandable-list">

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.onboardthermistorcurrentlimiter.config">Config</a>
          </p>
        </li>

      </ul>
    </li>
    <li>
    
      <input id="chk-ODrive.OffboardThermistorCurrentLimiter" type="checkbox"  hidden />
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <label style="margin-left: 0px;" for="chk-ODrive.OffboardThermistorCurrentLimiter" class="chevron"></label>
        <a href="/api/odrive.offboardthermistorcurrentlimiter">OffboardThermistorCurrentLimiter</a>
      </p>
      <ul class="expandable-list">

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.offboardthermistorcurrentlimiter.config">Config</a>
          </p>
        </li>

      </ul>
    </li>
    <li>
    
      <input id="chk-ODrive.Motor" type="checkbox"  hidden />
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <label style="margin-left: 0px;" for="chk-ODrive.Motor" class="chevron"></label>
        <a href="/api/odrive.motor">Motor</a>
      </p>
      <ul class="expandable-list">

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.motor.currentcontrol">CurrentControl</a>
          </p>
        </li>
        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.motor.gatedriver">GateDriver</a>
          </p>
        </li>
        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.motor.timinglog">TimingLog</a>
          </p>
        </li>
        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.motor.config">Config</a>
          </p>
        </li>

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.motor.error">Error</a>
          </p>
        </li>
        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.motor.armedstate">ArmedState</a>
          </p>
        </li>
        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.motor.motortype">MotorType</a>
          </p>
        </li>
      </ul>
    </li>
    <li>
    
      <input id="chk-ODrive.Controller" type="checkbox"  hidden />
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <label style="margin-left: 0px;" for="chk-ODrive.Controller" class="chevron"></label>
        <a href="/api/odrive.controller">Controller</a>
      </p>
      <ul class="expandable-list">

        <li>
        
          <input id="chk-ODrive.Controller.Config" type="checkbox"  hidden />
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <label style="margin-left: 0px;" for="chk-ODrive.Controller.Config" class="chevron"></label>
            <a href="/api/odrive.controller.config">Config</a>
          </p>
          <ul class="expandable-list">

            <li>
              <p class="navitem">
                <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
                <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
                <a href="/api/odrive.controller.config.anticogging">Anticogging</a>
              </p>
            </li>

          </ul>
        </li>

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.controller.error">Error</a>
          </p>
        </li>
        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.controller.controlmode">ControlMode</a>
          </p>
        </li>
        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.controller.inputmode">InputMode</a>
          </p>
        </li>
      </ul>
    </li>
    <li>
    
      <input id="chk-ODrive.Encoder" type="checkbox"  hidden />
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <label style="margin-left: 0px;" for="chk-ODrive.Encoder" class="chevron"></label>
        <a href="/api/odrive.encoder">Encoder</a>
      </p>
      <ul class="expandable-list">

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.encoder.config">Config</a>
          </p>
        </li>

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.encoder.error">Error</a>
          </p>
        </li>
        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.encoder.mode">Mode</a>
          </p>
        </li>
      </ul>
    </li>
    <li>
    
      <input id="chk-ODrive.SensorlessEstimator" type="checkbox"  hidden />
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <label style="margin-left: 0px;" for="chk-ODrive.SensorlessEstimator" class="chevron"></label>
        <a href="/api/odrive.sensorlessestimator">SensorlessEstimator</a>
      </p>
      <ul class="expandable-list">

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.sensorlessestimator.config">Config</a>
          </p>
        </li>

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.sensorlessestimator.error">Error</a>
          </p>
        </li>
      </ul>
    </li>
    <li>
    
      <input id="chk-ODrive.TrapezoidalTrajectory" type="checkbox"  hidden />
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <label style="margin-left: 0px;" for="chk-ODrive.TrapezoidalTrajectory" class="chevron"></label>
        <a href="/api/odrive.trapezoidaltrajectory">TrapezoidalTrajectory</a>
      </p>
      <ul class="expandable-list">

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.trapezoidaltrajectory.config">Config</a>
          </p>
        </li>

      </ul>
    </li>
    <li>
    
      <input id="chk-ODrive.Endstop" type="checkbox"  hidden />
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <label style="margin-left: 0px;" for="chk-ODrive.Endstop" class="chevron"></label>
        <a href="/api/odrive.endstop">Endstop</a>
      </p>
      <ul class="expandable-list">

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.endstop.config">Config</a>
          </p>
        </li>

      </ul>
    </li>
    <li>
    
      <input id="chk-ODrive.SystemStats" type="checkbox"  hidden />
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <label style="margin-left: 0px;" for="chk-ODrive.SystemStats" class="chevron"></label>
        <a href="/api/odrive.systemstats">SystemStats</a>
      </p>
      <ul class="expandable-list">

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.systemstats.usb">Usb</a>
          </p>
        </li>
        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.systemstats.i2c">I2C</a>
          </p>
        </li>

      </ul>
    </li>
    <li>
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
        <a href="/api/odrive.config">Config</a>
      </p>
    </li>

  </ul>
</li>
                
              </ul>
            </li>
            
            <li class="navgroup">
              <p class="navheader">For ODrive Developers</p>
              <ul>
                
                
                
                
                
                <li><a class="navitem" href="/developer-guide" alt="Firmware Developer Guide">Firmware Developer Guide</a></li>
                
                
                
                
                <li><a class="navitem" href="/configuring-vscode" alt="Configuring Visual Studio Code">Configuring Visual Studio Code</a></li>
                
                
                
                
                <li><a class="navitem" href="/configuring-eclipse" alt="Configuring Eclipse">Configuring Eclipse</a></li>
                
                
              </ul>
            </li>
            
            <li class="navgroup">
              <p class="navheader">Component Guides</p>
              <ul>
                
                
                
                
                
                <li><a class="navitem" href="https://docs.google.com/spreadsheets/d/12vzz7XVEK6YNIOqH0jAz51F5VUpc-lJEs3mmkWP1H4Y" alt="Motor Guide">Motor Guide</a></li>
                
                
                
                
                <li><a class="navitem" href="https://docs.google.com/spreadsheets/d/1OBDwYrBb5zUPZLrhL98ezZbg94tUsZcdTuwiVNgVqpU" alt="Encoder Guide">Encoder Guide</a></li>
                
                
              </ul>
            </li>
            
          </ul>
        </div>
        <div style="margin-top: 10px;">
          
          <p class="view"><a href="https://github.com/madcowswe/ODrive">View the Project on GitHub <small>madcowswe/ODrive</small></a></p>
          

          
          
          <p>Help improve these docs: submit edits using the link in the top right.</p>
          <p>If you need help, please search or ask the <a href=https://discourse.odriverobotics.com>ODrive Community</a>.</p>

          
        </div>
      </header>
      <section>

        <div class="pageactions">
          <div>
            <!-- edit icon taken from GitHub -->
            <svg transform="translate(0,1)" class="octicon octicon-pencil" viewBox="0 0 14 16" version="1.1" width="10" height="12" aria-hidden="true">
              <path fill-rule="evenodd" d="M0 12v3h3l8-8-3-3-8 8zm3 2H1v-2h1v1h1v1zm10.3-9.3L12 6 9 3l1.3-1.3a.996.996 0 0 1 1.41 0l1.59 1.59c.39.39.39 1.02 0 1.41z"></path>
            </svg>
            
            <a href="https://www.github.com/madcowswe/ODrive/edit/master/docs/getting-started.md">edit on GitHub</a>
          </div>

          
        </div>


      <h1 id="getting-started">Getting Started</h1>

<h3 id="table-of-contents">Table of contents</h3>
<!-- TOC depthFrom:2 depthTo:2 -->

<ul>
  <li><a href="#hardware-requirements">Hardware Requirements</a></li>
  <li><a href="#wiring-up-the-odrive">Wiring up the ODrive</a></li>
  <li><a href="#downloading-and-installing-tools">Downloading and Installing Tools</a></li>
  <li><a href="#firmware">Firmware</a></li>
  <li><a href="#start-odrivetool">Start <code class="language-plaintext highlighter-rouge">odrivetool</code></a></li>
  <li><a href="#configure-m0">Configure M0</a></li>
  <li><a href="#position-control-of-m0">Position control of M0</a></li>
  <li><a href="#other-control-modes">Other control modes</a></li>
  <li><a href="#watchdog-timer">Watchdog Timer</a></li>
  <li><a href="#whats-next">What’s next?</a></li>
  <li><a href="#upgrading-from-0412">Upgrading from 0.4.12</a></li>
</ul>

<!-- /TOC -->

<h2 id="hardware-requirements">Hardware Requirements</h2>

<h3 id="you-will-need">You will need:</h3>
<ul>
  <li>One or two <a href="https://docs.google.com/spreadsheets/d/12vzz7XVEK6YNIOqH0jAz51F5VUpc-lJEs3mmkWP1H4Y">brushless motors</a>. It is fine, even recommended, to start testing with just a single motor and encoder.</li>
  <li>One or two <a href="https://docs.google.com/spreadsheets/d/1OBDwYrBb5zUPZLrhL98ezZbg94tUsZcdTuwiVNgVqpU">encoder(s)</a></li>
  <li>A power resistor. A good starting point would be the 50W resistor included with your ODrive.
    <details><summary>Do I really need a power resistor? What values to choose?</summary><div>

        <p>If you don’t have a brake resistor, the ODrive will pump excess power back into the power supply during deceleration to achieve the desired deceleration torque. If your power supply doesn’t eat that power (which it won’t if it’s not a battery), the bus voltage will inevitebly rise. If you’re unlucky this will break the power supply.
At some point, the ODrive’s overvoltage protection will trip, after which both motors will be allowed to spin freely. Depending on your machine, this may or may not be a problem.</p>

        <p>The power resistor values you need depends on your motor setup, and peak/average deceleration power.</p>

        <p>To be on the safe side, think about what speed and current limits you want to set for the motor.</p>

        <p>When braking at max speed and with maximum motor current, the power that is dissipated in the power resistor can be calulated as: <code class="language-plaintext highlighter-rouge">P_brake = V_emf * I_motor</code> where <code class="language-plaintext highlighter-rouge">V_emf = motor_rpm / motor_kv</code>.</p>

      </div></details>
  </li>
  <li>A power supply (12V-24V for the 24V board variant, 12V-56V for the 56V board variant). A battery is also fine. Some advice on choosing a power supply can be found <a href="https://things-in-motion.blogspot.com/2018/12/how-to-select-right-power-source-for.html">here</a>.
    <details><summary>What voltage variant do I have?</summary><div>
        <p>On all ODrives shipped July 2018 or after have a silkscreen label clearly indicating the voltage variant.</p>

        <p>ODrives before this may or may not have this label. If you don’t have a label, then you can look at the bus capacitors (8 gray cylinder components on the underside of the board). If they read 470uF, you have a 24V version; if they read 120uF you have a 48V version.</p>
      </div></details>
  </li>
</ul>

<h2 id="wiring-up-the-odrive">Wiring up the ODrive</h2>
<div class="alert">
Make sure you have a good mechanical connection between the encoder and the motor, slip can cause disastrous oscillations or runaway.
</div>

<p>All non-power I/O is 3.3V output and 5V tolerant on input, on ODrive v3.3 and newer.</p>

<h3 id="wiring-up-the-motors">Wiring up the motors</h3>
<ul>
  <li>Connect the motor phases into the 3-phase screw terminals. It is not recommended to use a clip-on connector such as an alligator clip, as this can cause issues with the phase resistance/inductance measurements.</li>
</ul>

<h3 id="wiring-up-the-encoders">Wiring up the encoders</h3>
<p>Connect the encoder(s) to J4. The A,B phases are required, and the Z (index pulse) is optional. The A,B and Z lines have 3.3k pull up resistors, for use with open-drain encoder outputs. For single ended push-pull signals with weak drive current (&lt;4mA), you may want to desolder the pull-ups.</p>

<p><img src="https://docs.google.com/drawings/d/e/2PACX-1vTpJziAisrkvV1kTL4vckAJkmJ-BAvTwN1GeZZNCNwpTHv47Cf8bpz-gJqK2Z3un6FCHT4E-rcuUg6c/pub?w=1716&amp;h=1281" alt="Image of ODrive all hooked up" /></p>

<h3 id="safety--power-up">Safety &amp; Power UP</h3>
<div class="alert">
 Always think safety before powering up the ODrive if motors are attached. Consider what might happen if the motor spins as soon as power is applied.
</div>
<ul>
  <li>Unlike some devices, the ODrive does not recieve power over the USB port so the 24/56 volt power input is required even just to communicate with it using USB. It is ok to power up the ODrive before or after connecting the USB cable.</li>
  <li>To power up the ODrive, connect the power source to the DC terminals. Make sure to pay attention to the polarity. A small spark is normal. This is caused by the capacitors charging up.</li>
</ul>

<h2 id="downloading-and-installing-tools">Downloading and Installing Tools</h2>
<p>Most instructions in this guide refer to a utility called <code class="language-plaintext highlighter-rouge">odrivetool</code>, so you should install that first.</p>

<h3 id="windows">Windows</h3>
<ol>
  <li>Install Python 3. We recommend the Anaconda distribution because it packs a lot of useful scientific tools, however you can also install the standalone python.
    <ul>
      <li><strong>Anaconda</strong>: Download the installer from <a href="https://www.anaconda.com/download/#windows">here</a>. Execute the downloaded file and follow the instructions.</li>
      <li><strong>Standalone Python</strong>: Download the installer from <a href="https://www.python.org/downloads/">here</a>. Execute the downloaded file and follow the instructions.</li>
      <li>If you have Python 2 installed alongside Python 3, replace <code class="language-plaintext highlighter-rouge">pip</code> by <code class="language-plaintext highlighter-rouge">C:\Users\YOUR_USERNAME\AppData\Local\Programs\Python\Python36-32\Scripts\pip</code>. If you have trouble with this step then refer to <a href="https://www.youtube.com/watch?v=jnpC_Ib_lbc">this walkthrough</a>.</li>
    </ul>
  </li>
  <li>Launch the command prompt.
    <ul>
      <li><strong>Anaconda</strong>: In the start menu, type <code class="language-plaintext highlighter-rouge">Anaconda Prompt</code> <kbd>Enter</kbd></li>
      <li><strong>Standalone Python</strong>: In the start menu, type <code class="language-plaintext highlighter-rouge">cmd</code> <kbd>Enter</kbd></li>
    </ul>
  </li>
  <li>Install the ODrive tools by typing <code class="language-plaintext highlighter-rouge">pip install --upgrade odrive</code> <kbd>Enter</kbd></li>
  <li>Plug in a USB cable into the microUSB connector on ODrive, and connect it to your PC.</li>
  <li>Use the <a href="http://zadig.akeo.ie/">Zadig</a> utility to set ODrive driver to libusb-win32.
    <ul>
      <li>Check ‘List All Devices’ from the options menu, and select ‘ODrive 3.x Native Interface (Interface 2)’. With that selected in the device list choose ‘libusb-win32’ from the target driver list and then press the large ‘install driver’ button.</li>
    </ul>
  </li>
</ol>

<h3 id="osx">OSX</h3>
<p>We are going to run the following commands for installation in Terminal.</p>
<ol>
  <li>If you don’t already have it, install homebrew:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/usr/bin/ruby <span class="nt">-e</span> <span class="s2">"</span><span class="si">$(</span>curl <span class="nt">-fsSL</span> https://raw.githubusercontent.com/Homebrew/install/master/install<span class="si">)</span><span class="s2">"</span>
</code></pre></div>    </div>
  </li>
  <li>Install python:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew <span class="nb">install </span>python
</code></pre></div>    </div>
  </li>
  <li>If you get the error: <code class="language-plaintext highlighter-rouge">Error: python 2.7.14_2 is already installed</code>, then upgrade to Python 3 by running:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew upgrade python
</code></pre></div>    </div>
  </li>
  <li>The odrive tools uses libusb to communicate to the ODrive:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew <span class="nb">install </span>libusb
</code></pre></div>    </div>
  </li>
  <li>Now that you have Python 3 and all the package managers, run:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip3 <span class="nb">install</span> <span class="nt">--upgrade</span> odrive
</code></pre></div>    </div>
  </li>
</ol>

<p><strong>Troubleshooting</strong></p>
<ol>
  <li>Permission Errors: Just run the previous command in sudo
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>pip3 <span class="nb">install</span> <span class="nt">--upgrade</span> odrive
</code></pre></div>    </div>
  </li>
  <li>Dependency Errors: If the installer doesn’t complete and you get a dependency
error (Ex. “No module…” or “module_name not found”)
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>pip3 <span class="nb">install </span>module_name
</code></pre></div>    </div>
    <p>Try step 5 again</p>
  </li>
</ol>

<h3 id="linux">Linux</h3>
<ol>
  <li><a href="https://www.python.org/downloads/">Install Python 3</a>. (for example, on Ubuntu, <code class="language-plaintext highlighter-rouge">sudo apt install python3 python3-pip</code>)</li>
  <li>Install the ODrive tools by opening a terminal and typing <code class="language-plaintext highlighter-rouge">sudo pip3 install --upgrade odrive</code> <kbd>Enter</kbd>
    <ul>
      <li>This should automatically add the udev rules. If this fails for some reason you can add them manually:
        <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nb">echo</span> <span class="s1">'SUBSYSTEM=="usb", ATTR{idVendor}=="1209", ATTR{idProduct}=="0d[0-9][0-9]", MODE="0666"'</span> | <span class="nb">sudo tee</span> /etc/udev/rules.d/91-odrive.rules
 <span class="nb">sudo </span>udevadm control <span class="nt">--reload-rules</span>
 <span class="nb">sudo </span>udevadm trigger
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li><strong>Ubuntu</strong>, <strong>Raspbian</strong>: If you can’t invoke <code class="language-plaintext highlighter-rouge">odrivetool</code> at this point, try adding <code class="language-plaintext highlighter-rouge">~/.local/bin</code> to your <code class="language-plaintext highlighter-rouge">$PATH</code> (<a href="https://unix.stackexchange.com/a/392710/176715">see related bug</a>). This is done for example by running <code class="language-plaintext highlighter-rouge">nano ~/.bashrc</code>, scrolling to the bottom, pasting <code class="language-plaintext highlighter-rouge">export PATH=$PATH:~/.local/bin</code>, and then saving and closing, and close and reopen the terminal window.</li>
</ol>

<h2 id="firmware">Firmware</h2>
<p><strong>ODrive v3.5 and later</strong><br />
Your board should come preflashed with firmware. If you run into problems, follow the instructions <a href="/odrivetool.html#device-firmware-update">here</a> on the DFU procedure before you continue.</p>

<p><strong>ODrive v3.4 and earlier</strong><br />
Your board does <strong>not</strong> come preflashed with any firmware. Follow the instructions <a href="/odrivetool.html#device-firmware-update">here</a> on the ST Link procedure before you continue.</p>

<h2 id="start-odrivetool">Start <code class="language-plaintext highlighter-rouge">odrivetool</code></h2>
<p>To launch the main interactive ODrive tool, type <code class="language-plaintext highlighter-rouge">odrivetool</code> <kbd>Enter</kbd>. Connect your ODrive and wait for the tool to find it. Now you can, for instance type <code class="language-plaintext highlighter-rouge">odrv0.vbus_voltage</code> <kbd>Enter</kbd> to inpect the boards main supply voltage.
It should look something like this:</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ODrive control utility v0.5.1
Please connect your ODrive.
Type help() for help.

Connected to ODrive 306A396A3235 as odrv0
In [1]: odrv0.vbus_voltage
Out[1]: 11.97055721282959
</code></pre></div></div>

<p>The tool you’re looking at is a fully capable Python command prompt, so you can type any valid python code.</p>

<p>You can read more about <code class="language-plaintext highlighter-rouge">odrivetool</code> <a href="/odrivetool.html">here</a>.</p>

<h2 id="configure-m0">Configure M0</h2>
<div class="alert">Read this section carefully, else you risk breaking something.</div>
<div class="note">There is a <a href="/hoverboard.html">separate guide</a> specifically for hoverboard motors.</div>

<h3 id="1-set-the-limits">1. Set the limits:</h3>
<details><summary>Wait, how do I set these?</summary><div>
    <p>In the previous step we started <code class="language-plaintext highlighter-rouge">odrivetool</code>. In there, you can assign variables directly by name.</p>

    <p>For instance, to set the current limit of M0 to 10A you would type: <code class="language-plaintext highlighter-rouge">odrv0.axis0.motor.config.current_lim = 10</code> <kbd>Enter</kbd></p>
  </div></details>

<p><strong>Current limit</strong><br />
<code class="language-plaintext highlighter-rouge">odrv0.axis0.motor.config.current_lim</code> [A].<br />
The default current limit, for safety reasons, is set to 10A. This is quite weak, but good for making sure the drive is stable. Once you have tuned the oDrive, you can increase this to 60A to increase performance. Note that above 60A, you must change the current amplifier gains. You do this by requesting a different current range. i.e. for 90A on M0: <code class="language-plaintext highlighter-rouge">odrv0.axis0.motor.config.requested_current_range = 90</code> [A], then save the configuration and reboot as the gains are written out to the DRV (MOSFET driver) only during startup.</p>

<p><em>Note: The motor current and the current drawn from the power supply is not the same in general. You should not look at the power supply current to see what is going on with the motor current.</em></p>
<details><summary>Ok, so tell me how it actually works then…</summary><div>
    <p>The current in the motor is only connected to the current in the power supply <em>sometimes</em> and other times it just cycles out of one phase and back in the other. This is what the modulation magnitude is (sometimes people call this duty cycle, but that’s a bit confusing because we use SVM not straight PWM). When the modulation magnitude is 0, the average voltage seen across the motor phases is 0, and the motor current is never connected to the power supply. When the magnitude is 100%, it is always connected, and at 50% it’s connected half the time, and cycled in just the motor half the time.</p>

    <p>The largest effect on modulation magnitude is speed. There are other smaller factors, but in general: if the motor is still it’s not unreasonable to have 50A in the motor from 5A on the power supply. When the motor is spinning close to top speed, the power supply current and the motor current will be somewhat close to each other.</p>
  </div></details>

<p><strong>Velocity limit</strong><br />
<code class="language-plaintext highlighter-rouge">odrv0.axis0.controller.config.vel_limit</code> [turn/s].<br />
The motor will be limited to this speed. Again the default value is quite slow.</p>

<p><strong>Calibration current</strong><br />
You can change <code class="language-plaintext highlighter-rouge">odrv0.axis0.motor.config.calibration_current</code> [A] to the largest value you feel comfortable leaving running through the motor continuously when the motor is stationary. If you are using a small motor (i.e. 15A current rated) you may need to reduce <code class="language-plaintext highlighter-rouge">calibration_current</code> to a value smaller than the default.</p>

<h3 id="2-set-other-hardware-parameters">2. Set other hardware parameters</h3>
<p><code class="language-plaintext highlighter-rouge">odrv0.config.brake_resistance</code> [Ohm]<br />
This is the resistance of the brake resistor. If you are not using it, you may set it to <code class="language-plaintext highlighter-rouge">0</code>. Note that there may be some extra resistance in your wiring and in the screw terminals, so if you are getting issues while braking you may want to increase this parameter by around 0.05 ohm.</p>

<p><code class="language-plaintext highlighter-rouge">odrv0.axis0.motor.config.pole_pairs</code><br />
This is the number of <strong>magnet poles</strong> in the rotor, <strong>divided by two</strong>. To find this, you can simply count the number of permanent magnets in the rotor, if you can see them.
<strong>Note</strong>: This is <strong>not</strong> the same as the number of coils in the stator.
A good way to find the number of pole pairs is with a current limited power supply. Connect any two of the three phases to a power supply outputting around 2A, spin the motor by hand, and count the number of detents. This will be the number of pole pairs. If you can’t distinguish the detents from the normal cogging present when the motor is disconnected, increase the current.
Another way is sliding a loose magnet in your hand around the rotor, and counting how many times it stops. This will be the number of <em>pole pairs</em>. If you use a ferrous piece of metal instead of a magnet, you will get the number of <em>magnet poles</em>.</p>

<p><code class="language-plaintext highlighter-rouge">odrv0.axis0.motor.config.torque_constant</code><br />
This is the ratio of torque produced by the motor per Amp of current delivered to the motor. This should be set to <strong>8.27 / (motor KV)</strong>.
If you decide that you would rather command torque in units of Amps, you could simply set the torque constant to 1.</p>

<p><code class="language-plaintext highlighter-rouge">odrv0.axis0.motor.config.motor_type</code><br />
This is the type of motor being used. Currently two types of motors are supported: High-current motors (<code class="language-plaintext highlighter-rouge">MOTOR_TYPE_HIGH_CURRENT</code>) and gimbal motors (<code class="language-plaintext highlighter-rouge">MOTOR_TYPE_GIMBAL</code>).</p>
<details><summary>Which <code>motor_type</code> to choose?</summary><div>

    <p>If you’re using a regular hobby brushless motor like <a href="https://hobbyking.com/en_us/turnigy-aerodrive-sk3-5065-236kv-brushless-outrunner-motor.html">this</a> one, you should set <code class="language-plaintext highlighter-rouge">motor_mode</code> to <code class="language-plaintext highlighter-rouge">MOTOR_TYPE_HIGH_CURRENT</code>. For low-current gimbal motors like <a href="https://hobbyking.com/en_us/turnigy-hd-5208-brushless-gimbal-motor-bldc.html">this</a> one, you should choose <code class="language-plaintext highlighter-rouge">MOTOR_TYPE_GIMBAL</code>. Do not use <code class="language-plaintext highlighter-rouge">MOTOR_TYPE_GIMBAL</code> on a motor that is not a gimbal motor, as it may overheat the motor or the ODrive.</p>

    <p><strong>Further detail:</strong>
If 100’s of mA of current noise is “small” for you, you can choose <code class="language-plaintext highlighter-rouge">MOTOR_TYPE_HIGH_CURRENT</code>.
If 100’s of mA of current noise is “large” for you, and you do not intend to spin the motor very fast (Ω * L « R), and the motor is fairly large resistance (1 ohm or larger), you can chose <code class="language-plaintext highlighter-rouge">MOTOR_TYPE_GIMBAL</code>.
If 100’s of mA current noise is “large” for you, <em>and</em> you intend to spin the motor fast, then you need to replace the shunt resistors on the ODrive.</p>
  </div></details>
<p><br /></p>

<p><em>Note: When using gimbal motors,</em> <code class="language-plaintext highlighter-rouge">current_lim</code> <em>and</em> <code class="language-plaintext highlighter-rouge">calibration_current</code> <em>actually mean “voltage limit” and “calibration voltage”, since we don’t use current feedback. This means that if you set it to 10, it means 10V, despite the name of the parameter.</em></p>

<p><strong>If using encoder</strong><br />
<code class="language-plaintext highlighter-rouge">odrv0.axis0.encoder.config.cpr</code>: Encoder Count Per Revolution [CPR]<br />
This is 4x the Pulse Per Revolution (PPR) value. Usually this is indicated in the datasheet of your encoder.</p>

<p><strong>If not using encoder</strong><br /></p>
<ul>
  <li>If you wish to run in sensorless mode, please see <a href="/commands.html#setting-up-sensorless">Setting up sensorless</a>.</li>
  <li>If you are using hall sensor feedback, please see the <a href="/hoverboard.html">hoverboard motor example</a>.</li>
</ul>

<p><strong>If using motor thermistor</strong><br />
Please see the <a href="/thermistors.html">Thermistors</a> page for setup.</p>

<h3 id="3-save-configuration">3. Save configuration</h3>
<p>You can save all <code class="language-plaintext highlighter-rouge">.config</code> parameters to persistent memory so the ODrive remembers them between power cycles.</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">odrv0.save_configuration()</code> <kbd>Enter</kbd>.</li>
</ul>

<h2 id="position-control-of-m0">Position control of M0</h2>
<p>Let’s get motor 0 up and running. The procedure for motor 1 is exactly the same, so feel free to substitute <code class="language-plaintext highlighter-rouge">axis1</code> wherever it says <code class="language-plaintext highlighter-rouge">axis0</code>.</p>

<ol>
  <li>Type <code class="language-plaintext highlighter-rouge">odrv0.axis0.requested_state = AXIS_STATE_FULL_CALIBRATION_SEQUENCE</code> <kbd>Enter</kbd>. After about 2 seconds should hear a beep. Then the motor will turn slowly in one direction for a few seconds, then back in the other direction.</li>
</ol>

<details><summary>What’s the point of this?</summary><div>
    <p>This procedure first measures your motor’s electrical properties (namely phase resistance and phase inductance) and then the offset between the motor’s electrical phase and the encoder position.</p>
  </div></details>

<p>The startup procedure is demonstrated <a href="https://www.youtube.com/watch?v=VCX1bA2xnuY">here</a>.</p>

<p><em>Note: the rotor must be allowed to rotate without any biased load during startup. That means mass and weak friction loads are fine, but gravity or spring loads are not okay. Also note that in the video, the motors spin after initialization, but in the current software the default behaviour is not like that.</em></p>

<details><summary>Help, something isn’t working!</summary><div>

    <p>Check the encoder wiring and that the encoder is firmly connected to the motor. Check the value of <code class="language-plaintext highlighter-rouge">dump_errors(odrv0)</code> and then refer to the <a href="/troubleshooting.html#error-codes">error code documentation</a> for details.</p>

    <p>Once you understand the error and have fixed its cause, you may clear the error state with (<code class="language-plaintext highlighter-rouge">dump_errors(odrv0, True)</code> <kbd>Enter</kbd>) and retry.</p>
  </div></details>

<ol>
  <li>Type <code class="language-plaintext highlighter-rouge">odrv0.axis0.requested_state = AXIS_STATE_CLOSED_LOOP_CONTROL</code> <kbd>Enter</kbd>. From now on the ODrive will try to hold the motor’s position. If you try to turn it by hand, it will fight you gently. That is unless you bump up <code class="language-plaintext highlighter-rouge">odrv0.axis0.motor.config.current_lim</code>, in which case it will fight you more fiercely. If the motor begins to vibrate either immediately or after being disturbed you will need to <a href="/control.html">lower the controller gains</a>.</li>
  <li>Send the motor a new position setpoint. <code class="language-plaintext highlighter-rouge">odrv0.axis0.controller.input_pos = 1</code> <kbd>Enter</kbd>. The units are in turns.</li>
  <li>At this point you will probably want to <a href="/control.html">Properly tune</a> the motor controller in order to maximize system performance.</li>
</ol>

<h2 id="other-control-modes">Other control modes</h2>
<p>The default control mode is unfiltered position control in the absolute encoder reference frame. You may wish to use a controlled trajectory instead. Or you may wish to control position in a circular frame to allow continuous rotation forever without growing the numeric value of the setpoint too large.</p>

<p>You may also wish to control velocity (directly or with a ramping filter).
You can also directly control the current of the motor, which is proportional to torque.</p>

<ul>
  <li><a href="#filtered-position-control">Filtered position control</a></li>
  <li><a href="#trajectory-control">Trajectory control</a></li>
  <li><a href="#circular-position-control">Circular position control</a></li>
  <li><a href="#velocity-control">Velocity control</a></li>
  <li><a href="#ramped-velocity-control">Ramped velocity control</a></li>
  <li><a href="#current-control">Current control</a></li>
</ul>

<h3 id="filtered-position-control">Filtered position control</h3>
<p>Asking the ODrive controller to go as hard as it can to raw setpoints may result in jerky movement. Even if you are using a planned trajectory generated from an external source, if that is sent at a modest frequency, the ODrive may chase each stair in the incoming staircase in a jerky way. In this case, a good starting point for tuning the filter bandwidth is to set it to one half of your setpoint command rate.</p>

<p>You can use the second order position filter in these cases.
Set the filter bandwidth: <code class="language-plaintext highlighter-rouge">axis.controller.config.input_filter_bandwidth = 2.0</code> [1/s]<br />
Activate the setpoint filter: <code class="language-plaintext highlighter-rouge">axis.controller.config.input_mode = INPUT_MODE_POS_FILTER</code>.<br />
You can now control the velocity with <code class="language-plaintext highlighter-rouge">axis.controller.input_pos = 1</code> [turns].</p>

<p><img src="/secondOrderResponse.PNG" alt="secondOrderResponse" /><br />
Step response of a 1000 to 0 position input with a filter bandwidth of 1.0 [/sec].</p>

<h3 id="trajectory-control">Trajectory control</h3>
<p>See the <strong>Usage</strong> section for usage details.<br />
This mode lets you smoothly accelerate, coast, and decelerate the axis from one position to another. With raw position control, the controller simply tries to go to the setpoint as quickly as possible. Using a trajectory lets you tune the feedback gains more aggressively to reject disturbance, while keeping smooth motion.</p>

<p><img src="/TrapTrajPosVel.PNG" alt="Taptraj" /><br />
In the above image blue is position and orange is velocity.</p>

<h4 id="parameters">Parameters</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;odrv&gt;.&lt;axis&gt;.trap_traj.config.vel_limit = &lt;Float&gt;
&lt;odrv&gt;.&lt;axis&gt;.trap_traj.config.accel_limit = &lt;Float&gt;
&lt;odrv&gt;.&lt;axis&gt;.trap_traj.config.decel_limit = &lt;Float&gt;
&lt;odrv&gt;.&lt;axis&gt;.controller.config.inertia = &lt;Float&gt;
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">vel_limit</code> is the maximum planned trajectory speed.  This sets your coasting speed.<br />
<code class="language-plaintext highlighter-rouge">accel_limit</code> is the maximum acceleration in turns / sec^2<br />
<code class="language-plaintext highlighter-rouge">decel_limit</code> is the maximum deceleration in turns / sec^2<br />
<code class="language-plaintext highlighter-rouge">controller.config.inertia</code> is a value which correlates acceleration (in turns / sec^2) and motor torque. It is 0 by default. It is optional, but can improve response of your system if correctly tuned. Keep in mind this will need to change with the load / mass of your system.</p>

<p>All values should be strictly positive (&gt;= 0).</p>

<p>Keep in mind that you must still set your safety limits as before.  It is recommended you set these a little higher ( &gt; 10%) than the planner values, to give the controller enough control authority.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;odrv&gt;.&lt;axis&gt;.motor.config.current_lim = &lt;Float&gt;
&lt;odrv&gt;.&lt;axis&gt;.controller.config.vel_limit = &lt;Float&gt;
</code></pre></div></div>

<h4 id="usage">Usage</h4>
<p>Make sure you are in position control mode. To activate the trajectory module, set the input mode to trajectory:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>axis.controller.config.input_mode = INPUT_MODE_TRAP_TRAJ
</code></pre></div></div>

<p>Simply send a position command to execute the move:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;odrv&gt;.&lt;axis&gt;.controller.input_pos = &lt;Float&gt;
</code></pre></div></div>

<p>Use the <code class="language-plaintext highlighter-rouge">move_incremental</code> function to move to a relative position.
To set the goal relative to the current actual position, use <code class="language-plaintext highlighter-rouge">from_goal_point = False</code>
To set the goal relative to the previous destination, use <code class="language-plaintext highlighter-rouge">from_goal_point = True</code></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;odrv&gt;.&lt;axis&gt;.controller.move_incremental(pos_increment, from_goal_point)
</code></pre></div></div>

<p>You can also execute a move with the <a href="/ascii-protocol.html#motor-trajectory-command">appropriate ascii command</a>.</p>

<h3 id="circular-position-control">Circular position control</h3>

<p>To enable Circular position control, set <code class="language-plaintext highlighter-rouge">axis.controller.config.circular_setpoints = True</code></p>

<p>This mode is useful for continuous incremental position movement. For example a robot rolling indefinitely, or an extruder motor or conveyor belt moving with controlled increments indefinitely.
In the regular position mode, the <code class="language-plaintext highlighter-rouge">input_pos</code> would grow to a very large value and would lose precision due to floating point rounding.</p>

<p>In this mode, the controller will try to track the position within only one turn of the motor. Specifically, <code class="language-plaintext highlighter-rouge">input_pos</code> is expected in the range <code class="language-plaintext highlighter-rouge">[0, 1)</code>. If the <code class="language-plaintext highlighter-rouge">input_pos</code> is incremented to outside this range (say via step/dir input), it is automatically wrapped around into the correct value.
Note that in this mode <code class="language-plaintext highlighter-rouge">encoder.pos_circular</code> is used for feedback instead of <code class="language-plaintext highlighter-rouge">encoder.pos_estimate</code>.</p>

<p>If you try to increment the axis with a large step in one go that exceeds <code class="language-plaintext highlighter-rouge">1</code> turn, the motor will go to the same angle around the wrong way. This is also the case if there is a large disturbance. If you have an application where you would like to handle larger steps, you can use a larger circular range. Set <code class="language-plaintext highlighter-rouge">controller.config.circular_setpoints_range = N</code>. Choose N to give you an appropriate circular space for your application.</p>

<h3 id="velocity-control">Velocity control</h3>
<p>Set <code class="language-plaintext highlighter-rouge">axis.controller.config.control_mode = CONTROL_MODE_VELOCITY_CONTROL</code>.<br />
You can now control the velocity with <code class="language-plaintext highlighter-rouge">axis.controller.input_vel = 1</code> [turn/s].</p>

<h3 id="ramped-velocity-control">Ramped velocity control</h3>
<p>Set <code class="language-plaintext highlighter-rouge">axis.controller.config.control_mode = CONTROL_MODE_VELOCITY_CONTROL</code>.<br />
Set the velocity ramp rate (acceleration): <code class="language-plaintext highlighter-rouge">axis.controller.config.vel_ramp_rate = 0.5</code> [turn/s^2]<br />
Activate the ramped velocity mode: <code class="language-plaintext highlighter-rouge">axis.controller.config.input_mode = INPUT_MODE_VEL_RAMP</code>.<br />
You can now control the velocity with <code class="language-plaintext highlighter-rouge">axis.controller.input_vel = 1</code> [turn/s].</p>

<h3 id="torque-control">Torque control</h3>
<p>Set <code class="language-plaintext highlighter-rouge">axis.controller.config.control_mode = CONTROL_MODE_TORQUE_CONTROL</code>.<br />
You can now control the torque with <code class="language-plaintext highlighter-rouge">axis.controller.input_torque = 0.1</code> [Nm].</p>

<p>Note: If you exceed <code class="language-plaintext highlighter-rouge">vel_limit</code> in current control mode, the current is reduced. To disable this, set <code class="language-plaintext highlighter-rouge">axis.controller.enable_current_mode_vel_limit = False</code>.</p>

<h2 id="watchdog-timer">Watchdog Timer</h2>
<p>Each axis has a configurable watchdog timer that can stop the motors if the
control connection to the ODrive is interrupted.</p>

<p>Each axis has a configurable watchdog timeout: <code class="language-plaintext highlighter-rouge">axis.config.watchdog_timeout</code>,
measured in seconds. Set <code class="language-plaintext highlighter-rouge">axis.config.enable_watchdog = True</code> to turn on this feature.</p>

<p>The watchdog is fed using the <code class="language-plaintext highlighter-rouge">axis.watchdog_feed()</code> method of each axis. Some <a href="/ascii-protocol.html#command-reference">ascii commands</a> feed the watchdog automatically.</p>

<h2 id="whats-next">What’s next?</h2>
<p>You can now:</p>
<ul>
  <li><a href="/control.html">Properly tune</a> the motor controller to unlock the full potential of the ODrive.</li>
  <li>See what other <a href="/commands.html">commands and parameters</a> are available, in order to better control the ODrive.</li>
  <li>Control the ODrive from your own program or hook it up to an existing system through one of it’s <a href="/pinout.html">interfaces</a>.</li>
  <li>See how you can improve the behavior during the startup procedure, like <a href="/encoders.html#encoder-with-index-signal">bypassing encoder calibration</a>.</li>
</ul>

<p>If you have any issues or any questions please get in touch. The <a href="https://discourse.odriverobotics.com/">ODrive Community</a> warmly welcomes you.</p>

<h2 id="upgrading-from-0412">Upgrading from 0.4.12</h2>
<p>A new version (0.5.1) of ODrive firmware has released, complete with a new odrivetool.  Follow the installation instructions, making sure to add the <code class="language-plaintext highlighter-rouge">--upgrade</code> flag to pip commands, and check out the <a href="../CHANGELOG.md">Changelog</a> for changes!</p>

<p>The odrivetool will stage and restore your configuration.  This probably isn’t wise for the 0.4.12 -&gt; 0.5.1 upgrade, so we suggest using <code class="language-plaintext highlighter-rouge">odrv0.erase_configuration()</code> immediately after connecting the first time.</p>


      </section>
      <!--<footer>
        
        <p>This project is maintained by <a href="https://github.com/madcowswe">madcowswe</a></p>
        
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>-->
    </div>
    <script src="/assets/js/scale.fix.js"></script>
    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-93396600-3', 'auto');
      ga('send', 'pageview');
    </script>
    
    <script type="text/javascript">
      // Rewrite all links that start with "../" to point to the GitHub repo
      window.onload = function(){
        var links = document.links;
        var i = links.length;
        while (i--) {
          if (links[i].getAttribute("href").slice(0, 3) == "../") {
            links[i].href = "https://github.com/madcowswe/ODrive/blob/master/" + links[i].getAttribute("href").slice(3);
          }
          if (links[i].getAttribute("href").slice(0, 15) == "getting-started") {
            links[i].href = "/" + links[i].getAttribute("href").slice(15);
          }
        }
      }
    </script>
    <script>
      // Scroll the navbar to the position of the selected item
      var element = document.getElementsByClassName("currentitem")[0];
      element.scrollIntoView(false);
    </script>
  </body>
</html>

