


<!DOCTYPE html>
<!-- source: https://github.com/pages-themes/minimal/blob/master/_layouts/default.html -->
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Interfaces | ODrive</title>
<meta name="generator" content="Jekyll v3.8.7" />
<meta property="og:title" content="Interfaces" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="High performance motor control" />
<meta property="og:description" content="High performance motor control" />
<meta property="og:site_name" content="ODrive" />
<script type="application/ld+json">
{"headline":"Interfaces","description":"High performance motor control","url":"/interfaces.html","@type":"WebPage","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=b4e5469dcf6e2f2139cd0ae9f20e8bf6bbb256c2">
    <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div style="position: absolute;top: 0;left: 0;width: 100%;background-color: #5bc0de;height: 20px;text-align: center;font-weight: 600">The docs reflect firmware version 0.5.1. There are many breaking <a href="/migration">changes</a>. Please find docs for v0.4.12 <a href="https://github.com/madcowswe/ODrive/blob/fw-v0.4.12/docs/getting-started.md">here</a>.</div>
    <div class="wrapper">
      <header>
        <div>
          <h1><a href="/">ODrive Documentation</a></h1>

          

          <p>High performance motor control</p>
        </div>
        <div style="overflow-y: auto;">
          <ul id="navbar">
            
            <li class="navgroup">
              <p class="navheader">General</p>
              <ul>
                
                
                
                
                
                <li><a class="navitem" href="/" alt="Getting Started">Getting Started</a></li>
                
                
                
                
                <li><a class="navitem" href="/odrivetool" alt="ODrive Tool">ODrive Tool</a></li>
                
                
                
                
                <li><a class="navitem" href="/commands" alt="Parameters & Commands">Parameters & Commands</a></li>
                
                
                
                
                <li><a class="navitem" href="/encoders" alt="Encoders">Encoders</a></li>
                
                
                
                
                <li><a class="navitem" href="/control" alt="Control & Tuning">Control & Tuning</a></li>
                
                
                
                
                <li><a class="navitem" href="/troubleshooting" alt="Troubleshooting">Troubleshooting</a></li>
                
                
                
                
                <li><a class="navitem" href="/specifications" alt="Specifications">Specifications</a></li>
                
                
              </ul>
            </li>
            
            <li class="navgroup">
              <p class="navheader">Tutorials</p>
              <ul>
                
                
                
                
                
                <li><a class="navitem" href="/hoverboard" alt="Hoverboard Guide">Hoverboard Guide</a></li>
                
                
                
                
                <li><a class="navitem" href="/migration" alt="Migration Guide">Migration Guide</a></li>
                
                
              </ul>
            </li>
            
            <li class="navgroup">
              <p class="navheader">Interfaces</p>
              <ul>
                
                
                
                
                
                <li><a class="navitem" href="/pinout" alt="Pinout">Pinout</a></li>
                
                
                
                
                <li><a class="navitem" href="/native-protocol" alt="Native Protocol">Native Protocol</a></li>
                
                
                
                
                <li><a class="navitem" href="/can-protocol" alt="CAN Protocol">CAN Protocol</a></li>
                
                
                
                
                <li><a class="navitem" href="/ascii-protocol" alt="ASCII Protocol">ASCII Protocol</a></li>
                
                
                
                
                <li><a class="navitem" href="/step-direction" alt="Step & Direction">Step & Direction</a></li>
                
                
                
                
                <li><a class="navitem" href="/rc-pwm" alt="RC PWM">RC PWM</a></li>
                
                
                
                
                <li><a class="navitem" href="/endstops" alt="Homing & Endstops">Homing & Endstops</a></li>
                
                
                
                
                <li><a class="navitem" href="/thermistors" alt="Thermistors">Thermistors</a></li>
                
                
              </ul>
            </li>
            
            <li class="navgroup">
              <p class="navheader">API Reference</p>
              <ul>
                
                


<li>

  <input id="chk-ODrive" type="checkbox"  hidden />
  <p class="navitem">
    
    <label style="margin-left: 0px;" for="chk-ODrive" class="chevron"></label>
    <a href="/api/odrive">ODrive</a>
  </p>
  <ul class="expandable-list">

    <li>
    
      <input id="chk-ODrive.Can" type="checkbox"  hidden />
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <label style="margin-left: 0px;" for="chk-ODrive.Can" class="chevron"></label>
        <a href="/api/odrive.can">Can</a>
      </p>
      <ul class="expandable-list">

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.can.config">Config</a>
          </p>
        </li>

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.can.error">Error</a>
          </p>
        </li>
        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.can.protocol">Protocol</a>
          </p>
        </li>
      </ul>
    </li>
    <li>
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
        <a href="/api/odrive.endpoint">Endpoint</a>
      </p>
    </li>
    <li>
    
      <input id="chk-ODrive.Axis" type="checkbox"  hidden />
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <label style="margin-left: 0px;" for="chk-ODrive.Axis" class="chevron"></label>
        <a href="/api/odrive.axis">Axis</a>
      </p>
      <ul class="expandable-list">

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.axis.lockinconfig">LockinConfig</a>
          </p>
        </li>
        <li>
        
          <input id="chk-ODrive.Axis.Config" type="checkbox"  hidden />
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <label style="margin-left: 0px;" for="chk-ODrive.Axis.Config" class="chevron"></label>
            <a href="/api/odrive.axis.config">Config</a>
          </p>
          <ul class="expandable-list">

            <li>
              <p class="navitem">
                <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
                <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
                <a href="/api/odrive.axis.config.calibrationlockin">CalibrationLockin</a>
              </p>
            </li>

          </ul>
        </li>

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.axis.error">Error</a>
          </p>
        </li>
        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.axis.lockinstate">LockinState</a>
          </p>
        </li>
        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.axis.axisstate">AxisState</a>
          </p>
        </li>
      </ul>
    </li>
    <li>
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
        <a href="/api/odrive.thermistorcurrentlimiter">ThermistorCurrentLimiter</a>
      </p>
    </li>
    <li>
    
      <input id="chk-ODrive.OnboardThermistorCurrentLimiter" type="checkbox"  hidden />
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <label style="margin-left: 0px;" for="chk-ODrive.OnboardThermistorCurrentLimiter" class="chevron"></label>
        <a href="/api/odrive.onboardthermistorcurrentlimiter">OnboardThermistorCurrentLimiter</a>
      </p>
      <ul class="expandable-list">

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.onboardthermistorcurrentlimiter.config">Config</a>
          </p>
        </li>

      </ul>
    </li>
    <li>
    
      <input id="chk-ODrive.OffboardThermistorCurrentLimiter" type="checkbox"  hidden />
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <label style="margin-left: 0px;" for="chk-ODrive.OffboardThermistorCurrentLimiter" class="chevron"></label>
        <a href="/api/odrive.offboardthermistorcurrentlimiter">OffboardThermistorCurrentLimiter</a>
      </p>
      <ul class="expandable-list">

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.offboardthermistorcurrentlimiter.config">Config</a>
          </p>
        </li>

      </ul>
    </li>
    <li>
    
      <input id="chk-ODrive.Motor" type="checkbox"  hidden />
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <label style="margin-left: 0px;" for="chk-ODrive.Motor" class="chevron"></label>
        <a href="/api/odrive.motor">Motor</a>
      </p>
      <ul class="expandable-list">

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.motor.currentcontrol">CurrentControl</a>
          </p>
        </li>
        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.motor.gatedriver">GateDriver</a>
          </p>
        </li>
        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.motor.timinglog">TimingLog</a>
          </p>
        </li>
        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.motor.config">Config</a>
          </p>
        </li>

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.motor.error">Error</a>
          </p>
        </li>
        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.motor.armedstate">ArmedState</a>
          </p>
        </li>
        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.motor.motortype">MotorType</a>
          </p>
        </li>
      </ul>
    </li>
    <li>
    
      <input id="chk-ODrive.Controller" type="checkbox"  hidden />
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <label style="margin-left: 0px;" for="chk-ODrive.Controller" class="chevron"></label>
        <a href="/api/odrive.controller">Controller</a>
      </p>
      <ul class="expandable-list">

        <li>
        
          <input id="chk-ODrive.Controller.Config" type="checkbox"  hidden />
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <label style="margin-left: 0px;" for="chk-ODrive.Controller.Config" class="chevron"></label>
            <a href="/api/odrive.controller.config">Config</a>
          </p>
          <ul class="expandable-list">

            <li>
              <p class="navitem">
                <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
                <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
                <a href="/api/odrive.controller.config.anticogging">Anticogging</a>
              </p>
            </li>

          </ul>
        </li>

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.controller.error">Error</a>
          </p>
        </li>
        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.controller.controlmode">ControlMode</a>
          </p>
        </li>
        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.controller.inputmode">InputMode</a>
          </p>
        </li>
      </ul>
    </li>
    <li>
    
      <input id="chk-ODrive.Encoder" type="checkbox"  hidden />
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <label style="margin-left: 0px;" for="chk-ODrive.Encoder" class="chevron"></label>
        <a href="/api/odrive.encoder">Encoder</a>
      </p>
      <ul class="expandable-list">

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.encoder.config">Config</a>
          </p>
        </li>

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.encoder.error">Error</a>
          </p>
        </li>
        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.encoder.mode">Mode</a>
          </p>
        </li>
      </ul>
    </li>
    <li>
    
      <input id="chk-ODrive.SensorlessEstimator" type="checkbox"  hidden />
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <label style="margin-left: 0px;" for="chk-ODrive.SensorlessEstimator" class="chevron"></label>
        <a href="/api/odrive.sensorlessestimator">SensorlessEstimator</a>
      </p>
      <ul class="expandable-list">

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.sensorlessestimator.config">Config</a>
          </p>
        </li>

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.sensorlessestimator.error">Error</a>
          </p>
        </li>
      </ul>
    </li>
    <li>
    
      <input id="chk-ODrive.TrapezoidalTrajectory" type="checkbox"  hidden />
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <label style="margin-left: 0px;" for="chk-ODrive.TrapezoidalTrajectory" class="chevron"></label>
        <a href="/api/odrive.trapezoidaltrajectory">TrapezoidalTrajectory</a>
      </p>
      <ul class="expandable-list">

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.trapezoidaltrajectory.config">Config</a>
          </p>
        </li>

      </ul>
    </li>
    <li>
    
      <input id="chk-ODrive.Endstop" type="checkbox"  hidden />
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <label style="margin-left: 0px;" for="chk-ODrive.Endstop" class="chevron"></label>
        <a href="/api/odrive.endstop">Endstop</a>
      </p>
      <ul class="expandable-list">

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.endstop.config">Config</a>
          </p>
        </li>

      </ul>
    </li>
    <li>
    
      <input id="chk-ODrive.SystemStats" type="checkbox"  hidden />
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <label style="margin-left: 0px;" for="chk-ODrive.SystemStats" class="chevron"></label>
        <a href="/api/odrive.systemstats">SystemStats</a>
      </p>
      <ul class="expandable-list">

        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.systemstats.usb">Usb</a>
          </p>
        </li>
        <li>
          <p class="navitem">
            <a class="levelbar">&nbsp;</a><a class="levelbar">&nbsp;</a>
            <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
            <a href="/api/odrive.systemstats.i2c">I2C</a>
          </p>
        </li>

      </ul>
    </li>
    <li>
      <p class="navitem">
        <a class="levelbar">&nbsp;</a>
        <span style="margin-left: 7px; margin-right: 10px; float: inline-start;">&bull;</span>
        <a href="/api/odrive.config">Config</a>
      </p>
    </li>

  </ul>
</li>
                
              </ul>
            </li>
            
            <li class="navgroup">
              <p class="navheader">For ODrive Developers</p>
              <ul>
                
                
                
                
                
                <li><a class="navitem" href="/developer-guide" alt="Firmware Developer Guide">Firmware Developer Guide</a></li>
                
                
                
                
                <li><a class="navitem" href="/configuring-vscode" alt="Configuring Visual Studio Code">Configuring Visual Studio Code</a></li>
                
                
                
                
                <li><a class="navitem" href="/configuring-eclipse" alt="Configuring Eclipse">Configuring Eclipse</a></li>
                
                
              </ul>
            </li>
            
            <li class="navgroup">
              <p class="navheader">Component Guides</p>
              <ul>
                
                
                
                
                
                <li><a class="navitem" href="https://docs.google.com/spreadsheets/d/12vzz7XVEK6YNIOqH0jAz51F5VUpc-lJEs3mmkWP1H4Y" alt="Motor Guide">Motor Guide</a></li>
                
                
                
                
                <li><a class="navitem" href="https://docs.google.com/spreadsheets/d/1OBDwYrBb5zUPZLrhL98ezZbg94tUsZcdTuwiVNgVqpU" alt="Encoder Guide">Encoder Guide</a></li>
                
                
              </ul>
            </li>
            
          </ul>
        </div>
        <div style="margin-top: 10px;">
          
          <p class="view"><a href="https://github.com/madcowswe/ODrive">View the Project on GitHub <small>madcowswe/ODrive</small></a></p>
          

          
          
          <p>Help improve these docs: submit edits using the link in the top right.</p>
          <p>If you need help, please search or ask the <a href=https://discourse.odriverobotics.com>ODrive Community</a>.</p>

          
        </div>
      </header>
      <section>

        <div class="pageactions">
          <div>
            <!-- edit icon taken from GitHub -->
            <svg transform="translate(0,1)" class="octicon octicon-pencil" viewBox="0 0 14 16" version="1.1" width="10" height="12" aria-hidden="true">
              <path fill-rule="evenodd" d="M0 12v3h3l8-8-3-3-8 8zm3 2H1v-2h1v1h1v1zm10.3-9.3L12 6 9 3l1.3-1.3a.996.996 0 0 1 1.41 0l1.59 1.59c.39.39.39 1.02 0 1.41z"></path>
            </svg>
            
            <a href="https://www.github.com/madcowswe/ODrive/edit/master/docs/interfaces.md">edit on GitHub</a>
          </div>

          
        </div>


      <h1 id="interfaces">Interfaces</h1>

<div class="alert"> While developing custom ODrive control code it is recommend that your motors are free to spin continuously and are not connected to a drivetrain with limited travel. </div>

<p>The ODrive can be controlled over various ports and protocols. If you’re comfortable with embedded systems development, you can also run custom code directly on the ODrive. For that refer to the <a href="/developer-guide.html">developer documentation</a>.</p>

<h3 id="table-of-contents">Table of contents</h3>
<!-- TOC depthFrom:2 depthTo:2 -->

<ul>
  <li><a href="#pinout">Pinout</a></li>
  <li><a href="#native-protocol">Native Protocol</a></li>
  <li><a href="#ascii-protocol">ASCII protocol</a></li>
  <li><a href="#stepdirection">Step/direction</a></li>
  <li><a href="#rc-pwm-input">RC PWM input</a></li>
  <li><a href="#ports">Ports</a></li>
</ul>

<!-- /TOC -->

<h2 id="pinout">Pinout</h2>

<table>
  <thead>
    <tr>
      <th>GPIO</th>
      <th>primary</th>
      <th>step/dir</th>
      <th>other</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>GPIO1</td>
      <td>UART TX</td>
      <td>Axis0 Step</td>
      <td>Analog input, PWM input</td>
    </tr>
    <tr>
      <td>GPIO2</td>
      <td>UART RX</td>
      <td>Axis0 Dir</td>
      <td>Analog input, PWM input</td>
    </tr>
    <tr>
      <td>GPIO3</td>
      <td> </td>
      <td>Axis1 Step (+)</td>
      <td>Analog input, PWM input</td>
    </tr>
    <tr>
      <td>GPIO4</td>
      <td> </td>
      <td>Axis1 Dir (+)</td>
      <td>Analog input, PWM input</td>
    </tr>
    <tr>
      <td>GPIO5</td>
      <td> </td>
      <td> </td>
      <td>Analog input (*)</td>
    </tr>
    <tr>
      <td>GPIO6 (*)</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>GPIO7 (*)</td>
      <td> </td>
      <td>Axis1 Step (*)</td>
      <td> </td>
    </tr>
    <tr>
      <td>GPIO8 (*)</td>
      <td> </td>
      <td>Axis1 Dir (*)</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<p>(+) on ODrive v3.4 and earlier <br />
(*) ODrive v3.5 and later</p>

<p>Notes:</p>
<ul>
  <li>You must also connect GND between ODrive and your other board.</li>
  <li>ODrive v3.3 and onward have 5V tolerant GPIO pins.</li>
  <li>ODrive v3.5 and later have some noise suppression filters on the default step/dir pins</li>
  <li>You can change the step/dir pins using <code class="language-plaintext highlighter-rouge">axis.config.&lt;step/dir&gt;_gpio_pin</code>.</li>
</ul>

<h3 id="pin-function-priorities">Pin function priorities</h3>
<ol>
  <li>PWM in, if enabled. Disabled by default.</li>
  <li>UART, <strong>Enabled by default</strong>.</li>
  <li>Step/Dir, if enabled. Disabled by default.</li>
  <li>Analog, default behavior if not overridden (only on supported pins).</li>
  <li>Digital in, default behavior on pins not capable of analog input.</li>
</ol>

<p>For predictable results, try to have only one feature enabled for any one pin. When changing pin assignments you must:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">odrv0.save_configuration()</code></li>
  <li><code class="language-plaintext highlighter-rouge">odrv0.reboot()</code></li>
</ul>

<h3 id="analog-input">Analog input</h3>
<p>Analog inputs can be used to measure voltages between 0 and 3.3V. Odrive uses a 12 bit ADC (4096 steps) and so has a maximum resolution of 0.8 mV. Some GPIO pins require the appropriate pin priority (see above) to be set before they can be used as an analog input. To read the voltage on GPIO1 in odrive tool the following would be entered: <code class="language-plaintext highlighter-rouge">odrv0.get_adc_voltage(1)</code></p>

<h3 id="hall-feedback-pinout">Hall feedback pinout</h3>
<p>When the encoder mode is set to hall feedback, the pinout on the encoder port is as follows:</p>

<table>
  <thead>
    <tr>
      <th>Label on ODrive</th>
      <th>Hall feedback</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>A</td>
      <td>Hall A</td>
    </tr>
    <tr>
      <td>B</td>
      <td>Hall B</td>
    </tr>
    <tr>
      <td>Z</td>
      <td>Hall C</td>
    </tr>
  </tbody>
</table>

<h2 id="native-protocol">Native Protocol</h2>

<p>This protocol is what the ODrive Tool uses to talk to the ODrive. If you have a choice, this is the recommended protocol for all applications. The native protocol runs on USB and can also be configured to run on UART.</p>

<h4 id="python">Python</h4>

<p>The ODrive Tool you installed as part of the <a href="/#downloading-and-installing-tools">Getting Started guide</a> comes with a library that you can use to easily control the ODrive from Python.</p>

<p>Assuming you already installed the odrive library (<code class="language-plaintext highlighter-rouge">pip install odrive</code>), the simplest program to control the ODrive is this:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">odrive</span>
<span class="n">odrv0</span> <span class="o">=</span> <span class="n">odrive</span><span class="p">.</span><span class="n">find_any</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">odrv0</span><span class="p">.</span><span class="n">vbus_voltage</span><span class="p">))</span>
</code></pre></div></div>

<p>For a more comprehensive example, see <a href="../tools/odrive_demo.py">tools/odrive_demo.py</a>.</p>

<h4 id="other-languages">Other languages</h4>

<p>We don’t have an official library for you just yet. Check the community, there might be someone working on it. If you want to write a library yourself, refer to the <a href="protocol">native protocol specification</a>. You are of course welcome to contribute it back.</p>

<h2 id="ascii-protocol">ASCII protocol</h2>

<p>This is a simpler alternative to the native protocol if you don’t need all its bells and whistles. Before you use this, be sure that you’re ok with its limitations. The ASCII protocol is enabled by default on UART and can also be enabled on USB alongside with the native protocol.</p>

<p>For more details, see the <a href="/ascii-protocol.html">ASCII protocol specification</a>.</p>

<h3 id="arduino">Arduino</h3>
<p>There is an Arduino library that gives some examples on how to use the ASCII protocol to communicate with the ODrive. Check it out <a href="../Arduino/ODriveArduino">here</a>.</p>

<h2 id="stepdirection">Step/direction</h2>
<p>This is the simplest possible way of controlling the ODrive. It is also the most primitive and fragile one. So don’t use it unless you must interoperate with other hardware that you don’t control.</p>

<p>Pinout:</p>
<ul>
  <li>Step/dir signals: see <a href="#pinout">Pinout</a> above. Note in that section how to reassign the pins.</li>
  <li>GND: you must connect the grounds of the devices together. Use any GND pin on J3 of the ODrive.</li>
</ul>

<p>To enable step/dir mode for the GPIO, set <code class="language-plaintext highlighter-rouge">&lt;axis&gt;.config.enable_step_dir</code> to true for each axis that you wish to use this on.
Axis 0 step/dir pins conflicts with UART, and the UART takes priority. So to be able to use step/dir on Axis 0, you must also set <code class="language-plaintext highlighter-rouge">odrv0.config.enable_uart = False</code>. See the <a href="#pin-function-priorities">pin function priorities</a> for more detail. Don’t forget to save configuration and reboot.</p>

<p>There is also a config variable called <code class="language-plaintext highlighter-rouge">&lt;axis&gt;.config.turns_per_step</code>, which specifies how many turns a “step” corresponds to. The default value is 1.0f/1024.0f. It can be any floating point value.
The maximum step rate is pending tests, but it should handle at least 50kHz. If you want to test it, please be aware that the failure mode on too high step rates is expected to be that the motors shuts down and coasts.</p>

<p>Please be aware that there is no enable line right now, and the step/direction interface is enabled by default, and remains active as long as the ODrive is in position control mode. To get the ODrive to go into position control mode at bootup, see how to configure the <a href="/commands.html#startup-procedure">startup procedure</a>.</p>

<h2 id="rc-pwm-input">RC PWM input</h2>
<p>You can control the ODrive directly from an hobby RC receiver.</p>

<p>Some GPIO pins can be used for PWM input, if they are not allocated to other functions. For example, you must disable the UART to use GPIO 1,2. See the <a href="#pin-function-priorities">pin function priorities</a> for more detail.</p>

<p>Any of the numerical parameters that are writable from the ODrive Tool can be hooked up to a PWM input.
As an example, we’ll configure GPIO4 to control the angle of axis 0. We want the axis to move within a range of -2 to 2 turns.</p>

<ol>
  <li>Make sure you’re able control the axis 0 angle by writing to <code class="language-plaintext highlighter-rouge">odrv0.axis0.controller.input_pos</code>. If you need help with this follow the <a href="/">getting started guide</a>.</li>
  <li>If you want to control your ODrive with the PWM input without using anything else to activate the ODrive, you can configure the ODrive such that axis 0 automatically goes operational at startup. See <a href="/commands.html#startup-procedure">here</a> for more information.</li>
  <li>In ODrive Tool, configure the PWM input mapping
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> In [1]: odrv0.config.gpio4_pwm_mapping.min = -2
 In [2]: odrv0.config.gpio4_pwm_mapping.max = 2
 In [3]: odrv0.config.gpio4_pwm_mapping.endpoint = odrv0.axis0.controller._remote_attributes['input_pos']
</code></pre></div>    </div>
    <p>Note: you can disable the input by setting <code class="language-plaintext highlighter-rouge">odrv0.config.gpio4_pwm_mapping.endpoint = None</code></p>
  </li>
  <li>Save the configuration and reboot
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> In [4]: odrv0.save_configuration()
 In [5]: odrv0.reboot()
</code></pre></div>    </div>
  </li>
  <li>With the ODrive powered off, connect the RC receiver ground to the ODrive’s GND and one of the RC receiver signals to GPIO4. You may try to power the receiver from the ODrive’s 5V supply if it doesn’t draw too much power. Power up the the RC transmitter. You should now be able to control axis 0 from one of the RC sticks.</li>
</ol>

<p>Be sure to setup the Failsafe feature on your RC Receiver so that if connection is lost between the remote and the receiver, the receiver outputs 0 for the velocity setpoint of both axes (or whatever is safest for your configuration). Also note that if the receiver turns off (loss of power, etc) or if the signal from the receiver to the ODrive is lost (wire comes unplugged, etc), the ODrive will continue the last commanded velocity setpoint. There is currently no timeout function in the ODrive for PWM inputs.</p>

<h2 id="ports">Ports</h2>
<p>Note: when you use an existing library you don’t have to deal with the specifics described in this section.</p>

<h3 id="usb">USB</h3>

<p>This section assumes that you are familiar with the general USB architecture, in particular with terms like “configuration”, “interface” and “endpoint”.</p>

<p>On USB the ODrive provides a single configuration which is a composite device consisting of a CDC device (virtual COM port) and a vendor specific device.</p>

<details><summary>What is a composite device?</summary><div>
    <p>A composite device is a device where interfaces are grouped by interface association descriptors. For such devices, the host OS loads an intermediate driver, so that each of the interface groups can be treated like a separate device and have its own host-side driver attached.</p>
  </div></details>

<p>On the ODrive, the following interface groups are present:</p>

<ul>
  <li>Interface Association: Communication Device Class (CDC)
    <ul>
      <li>Interface 0:
        <ul>
          <li>Endpoint <code class="language-plaintext highlighter-rouge">0x82</code>: CDC commands</li>
        </ul>
      </li>
      <li>Interface 1:
        <ul>
          <li>Endpoint <code class="language-plaintext highlighter-rouge">0x01</code>: CDC data OUT</li>
          <li>Endpoint <code class="language-plaintext highlighter-rouge">0x81</code>: CDC data IN</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Interface Association: Vendor Specific Device Class
    <ul>
      <li>Interface 2:
        <ul>
          <li>Endpoint <code class="language-plaintext highlighter-rouge">0x03</code>: data OUT</li>
          <li>Endpoint <code class="language-plaintext highlighter-rouge">0x83</code>: data IN</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p>The endpoint pairs <code class="language-plaintext highlighter-rouge">0x01, 0x81</code> and <code class="language-plaintext highlighter-rouge">0x03, 0x83</code> behave exactly identical, only their descriptors (interface class, …) are different.</p>

<p>If you plan to access the USB endpoints directly it is recommended that you use interface 2. The other interfaces (the ones associated with the CDC device) are usually claimed by the CDC driver of the host OS, so their endpoints cannot be used without first detaching the CDC driver.</p>

<h3 id="uart">UART</h3>
<p>Baud rate: 115200 by default.  See <code class="language-plaintext highlighter-rouge">odrv0.config.uart_baudrate</code> to change value.  Requires a restart.
Pinout:</p>
<ul>
  <li>GPIO 1: Tx (connect to Rx of other device)</li>
  <li>GPIO 2: Rx (connect to Tx of other device)</li>
  <li>GND: you must connect the grounds of the devices together. Use any GND pin on J3 of the ODrive.</li>
</ul>

<h2 id="can-simple-protocol">CAN Simple Protocol</h2>

<p>See <a href="can-protocol">CAN Protocol</a>.</p>


      </section>
      <!--<footer>
        
        <p>This project is maintained by <a href="https://github.com/madcowswe">madcowswe</a></p>
        
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>-->
    </div>
    <script src="/assets/js/scale.fix.js"></script>
    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-93396600-3', 'auto');
      ga('send', 'pageview');
    </script>
    
    <script type="text/javascript">
      // Rewrite all links that start with "../" to point to the GitHub repo
      window.onload = function(){
        var links = document.links;
        var i = links.length;
        while (i--) {
          if (links[i].getAttribute("href").slice(0, 3) == "../") {
            links[i].href = "https://github.com/madcowswe/ODrive/blob/master/" + links[i].getAttribute("href").slice(3);
          }
          if (links[i].getAttribute("href").slice(0, 15) == "getting-started") {
            links[i].href = "/" + links[i].getAttribute("href").slice(15);
          }
        }
      }
    </script>
    <script>
      // Scroll the navbar to the position of the selected item
      var element = document.getElementsByClassName("currentitem")[0];
      element.scrollIntoView(false);
    </script>
  </body>
</html>

